# overview
## 导航栏
1. 获取项目列表
2. 删除项目
3. 新增项目
## 登录
1. 登录
## dashboard
1. 获取dashboard数据
## 接口测试
### 模块
1. 获取模块列表
2. 增加模块
3. 删除模块
4. 编辑模块
### 接口模板
#### 筛选项
1. 名称搜索
#### 模块列表
1. 获取接口列表
2. 删除接口模板
#### 接口关联用例
1. 查看接口关联用例列表
2. 查看接口关联用例信息
#### 模块详情
1. 添加接口模板
2. 运行接口模板
3. 查看接口模板详情
4. 编辑接口模板详情
### 接口用例
#### 筛选项
1. 名称搜索
#### 用例列表
1. 删除用例
2. 获取接口用例列表
3. 获取接口信息
#### 用例详情
1. 创建接口用例
2. 查看用例详情
3. 编辑用例详情
4. 运行用例详情
### 场景组合
#### 筛选项
1. 名称搜索
#### 场景列表
1. 获取场景列表
2. 删除场景
3. 查看场景引用
4. 场景运行接口
#### 场景详情
1. 场景创建接口
2. 获取场景详情
3. 编辑场景详情
### 环境
#### 系统环境 
#### 系统环境列表
1. 获取系统环境列表
2. 删除系统环境
#### 系统环境详情
1. 添加系统环境
2. 编辑系统环境
3. 查看系统环境
#### 用户变量
1. 获取用户变量列表
2. 添加用户变量
3. 删除用户变量
4. 编辑用户变量
### 定时任务
1. 获取定时任务信息
2. 获取定时任务列表
3. 删除定时任务
4. 创建定时任务
### 测试报告
1. 测试报告搜索
2. 测试报告列表
3. 删除测试报告
4. 查看测试报告详情
### 方法实现
1. 获取方法实现
2. 创建方法实现
3. 编辑方法实现
## 系统设置
### 角色管理
1. 获取角色列表
2. 增加角色
3. 冻结角色
4. 获取角色权限
5. 编辑角色
### 用户管理
1. 获取用户列表
2. 增加用户
3. 冻结用户
4. 编辑用户
5. 重置用户密码
# 导航栏
1. 获取项目列表
- 说明: 通过token判断用户权限,返回项目列表
- api: `/get_project`
- method: get
- Requset
    - header: `token: eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9`
- Response
```json
{
    "data": [
        {
            "name": "项目1", 
            "id": 1,
            "author": 3,
            "manger": 2,
            "desc": "这个是",
            "create_date": "2021-05-01 23:26:00",
            "update_date": "2021-05-01 23:26:00"
        },
        {
            "name": "项目2", 
            "id": 2,
            "author": 3,
            "manger": 2,
            "desc": "这个是",
            "create_date": "2021-05-01 23:26:00",
            "update_date": "2021-05-01 23:26:00"
        },
        {
            "name": "项目3", 
            "id": 3,
            "author": 3,
            "manger": 2,
            "desc": "这个是",
            "create_date": "2021-05-01 23:26:00",
            "update_date": "2021-05-01 23:26:00"
        }
    ],
    "success": true
}
```
2. 删除项目
- 说明: 删除项目
- api: `/delete_project`
- method: post
- Requset
    - header: `token: eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9`
```json
{
    "id": 3
}
```
- Response
```json
{
    "success": true
}
```
3. 新增项目
- 说明: 新增项目
- api: `/add_project`
- method: post
- Requset
    - header: `token: eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9`
```json
{
    "name": "项目1",
    "desc": "这是个项目"
}
```
- Response
```json
{
    "success": true
}
```

# 登录
1. 登录
- 说明: 请求登录,后端返回权限列表,个人信息,是否首次登录,token
- api: `/login`
- method: post
- Requset
    - header: `token: eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9`
```json
{
    "account": "admin",
    "password" : "584ac7e1e756e7f5414f4f989f52061b",
    "code": "AB3G"
}
```
- Response
```json
{
    "data": {
        "permission": {
            "1": [11, 12 ,15],
            "2": [24, 25, 29],
            "3": [31, 32, 33]
        },
        "info": {
            "account": "admin",
            "name": "xiaoming",
            "user_id": 30,
            "phone": "13013017222",
            "role": "admin",
            "status": true
        },
        "is_first": true,
        "token": "eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9",
    },
    "success": true
}
```

# dashboard
1. 获取dashboard数据
- 说明: 后台根据权限返回相关数据
- api: `/dashboard`
- method: post
- Requset
    - header: `token: eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9`
```json
{
    "project": 1
}
```
- Response
```json
{
    "data": {
        "template": {
            "total": 99,
            "increase": 20
            },
        "cases": {
            "total": 400,
            "increase": 80,
            "tswk_execution": 870,
            "total_execution": 9000
        },
        "suite": {
            "total": 200,
            "increase": 10,
            "tswk_execution": 87,
            "total_execution": 2000
        },
        "timer": {
            "total": 30,
            "increase": 2,
            "tswk_execution": 60,
            "total_execution": 500
        },
        "failure_list": [
            {
                "order": 1,
                "id": 23,
                "name": "login",
                "suite": 44,
                "count": 30
            }
        ],
        "timer_list": [
            {
                "id": 23,
                "name": "login",
                "cron": "* * * * 1 ?",
                "next_run": "2021-05-01 23:26:00",
                "manager": 123
            }
        ],
    },
    "success": true
}
```


# 接口测试

## 模块
1. 获取模块列表
- 说明: 增加模块
- api: `/module`
- method: post
- Requset
    - header: `token: eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9`
```json
{
    "type": "template"
}
```
- Response
```json
{
    "data":{
        "module":[
            {
                "name":"一级模块",
                "level":1,
                "id":1,
                "child":[
                    {
                        "name":"二级模块1",
                        "level":2,
                        "id":11,
                        "child":[
                            {
                                "name":"三级模块1",
                                "level":3,
                                "id":111
                            },
                            {
                                "name":"三级模块2",
                                "level":3,
                                "id":112
                            }
                        ]
                    },
                    {
                        "name":"二级模块2",
                        "level":2,
                        "id":12,
                        "child":[
                            {
                                "name":"三级模块1",
                                "level":3,
                                "id":113
                            },
                            {
                                "name":"三级模块2",
                                "level":3,
                                "id":114
                            }
                        ]
                    }
                ]
            },
            {
                "name":"一级模块2",
                "level":1,
                "id":2
            }
        ]
    },
    "success":true
}
```
2. 增加模块
- 说明: 增加模块
- api: `/add_module`
- method: add
- Requset
    - header: `token: eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9`
```json
{
    "type": "template",
    "parent": 2,
    "name": "模块1"
}
```
- Response
```json
{
    "success": true
}
```
3. 删除模块
- 说明: 删除模块
- api: `/delete_module`
- method: delete
- Requset
    - header: `token: eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9`
```json
{
    "id": 3
}
```
- Response
```json
{
    "success": true
}
```
4. 编辑模块
- 说明: 删除模块
- api: `/delete_module`
- method: update
- Requset
    - header: `token: eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9`
```json
{
    "id": 3,
    "name": "新名字"
}
```
- Response
```json
{
    "success": true
}
```
## 接口模板
### 筛选项
1. 名称搜索
- 说明: 接口模板搜索
- api: `/search_api`
- method: post
- Requset
    - header: `token: eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9`
```json
{
    "keyword": {
        "name": "冒烟测试"
    },
    "page": 1,
    "page_size": -1
}
```
- Response
```json
{
    "data": {
        "api": [
            {
                "id": 1,
                "name": "接口1",
                "update_date": "2021-05-01 23:26:00",
                "create_date": "2021-05-01 23:26:00",
                "status": true
            },
            {
                "id": 2,
                "name": "接口2",
                "update_date": "2021-05-01 23:26:00",
                "create_date": "2021-05-01 23:26:00",
                "status": true
            }
        ]
    },
    "success": true,
    "next_page": 2,
    "total_page": 20
}
```
### 接口模板列表
1. 获取接口列表
- 说明: 获取接口列表
- api: `/api`
- method: post
- Requset
    - header: `token: eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9`
```json
{
    "module_id": 2,
    "page": 1
}
```
- Response
```json
{
    "data": {
        "api": [
            {
                "id": 1,
                "name": "接口1",
                "update_date": "2021-05-01 23:26:00",
                "create_date": "2021-05-01 23:26:00",
                "status": true
            },
            {
                "id": 2,
                "name": "接口2",
                "update_date": "2021-05-01 23:26:00",
                "create_date": "2021-05-01 23:26:00",
                "status": true
            }
        ]
    },
    "success": true,
    "next_page": 2,
    "total_page": 20
}
```
2. 删除接口模板
- 说明: 删除接口模板, 支持批量删除
- api: `/delete_api`
- method: delete
- Requset
    - header: `token: eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9`
```json
{
    "id": [2, 3, 4, 5]
}
```
- Response
```json
{
    "success": true
}
```
### 关联用例列表
1. 查看接口关联用例列表
- 说明: 查看接口关联用例列表
- api: `/relation_cases`
- method: post
- Requset
    - header: `token: eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9`
```json
{
    "id": 2
}
```
- Response
```json
{
    "data": {
        "cases": [
            {
                "id": 3,
                "name": "正常登录",
                "level": 1,
                "near_status": true,
                "desc": "这是个登录的正向用例"
            },
                        {
                "id": 4,
                "name": "密码错误登录",
                "level": 2,
                "near_status": true,
                "desc": "这是个登录的反向用例"
            }
        ]
    },
    "success": true
}
```
2. 查看接口关联用例信息
- 说明: 查看接口关联用例列表
- api: `/relation_info`
- method: post
- Requset
    - header: `token: eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9`
```json
{
    "id": 2
}
```
- Response
```json
{
    "data": {
        "info": {
            "path": "/login",
            "name": "登录",
            "count": 30,
            "success_rate": 0.5
        }
    },
    "success": true
}
```
### 接口模板详情
1. 添加接口模板
- 说明: 添加接口模板
    - reuqest中如果是get则可以有query,如果是post
    - method如果为file则是文件
- api: `/add_api`
- method: post
- Requset
    - header: `token: eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9`
```json
{
    "info":{
        "name": "登录",
        "manager": 12,
        "author": 3,
        "module": 22,
        "status": 1,
        "path": "/login",
        "desc": "登录接口",
        "env": 3,
    },
    "request": {
        "method": "post",
        "headers": {
            "token": "${token}",
            "Content-Type": "application/json"
        },
        "query": {

        },
        "body": {
            "account": {
                "value": "*phone*",
                "type": "int"
            },
            "password":{
                "value": "123456",
                "type": "int"
            }
        },
        "file": {
            "file_id": 123,
            "param": {
                "use_type": "SalaryImg"
                }
        }
    }
}
```
- Response
```json
{
    "success": true,
    "id": 1234
}
```
2. 运行接口模板
- 说明: 运行接口模板
- api: `/execute_api`
- method: post
- Requset
    - header: `token: eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9`
```json
{
    "env": 3,
    "data": {
        "method": "post",
        "headers": {
            "Content-Type": "application/json"
        },
        "body": {
            "name": "xiaoming"
        },
        "query": {},
        "file": {},
        "event": [{
                "order": 1,
                "event": "database_extract",
                "name": "提取验证码",
                "key": ["code"],
                "sql": "select code from vcode where phone='${phone}';"
            }]
    },
    "suite": null,

}
```
- Response
```json
{
    "success": true,
    "data": {
        "headers": {
            "Content-Type": "application/json"
        },
        "body": {
            "success": true
        },
        "status_code": 200
    }
}
```
3. 查看接口模板详情
- 说明: 查看接口模板详情
    - status: 1为未开始 2为进行中 3为已完成
- api: `/api_details`
- method: post
- Requset
    - header: `token: eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9`
```json
{
    "id": 3 
}
```
- Response
```json
{
    "success": true,
    "data": {
        "info":{
            "name": "登录",
            "manager": 12,
            "author": 3,
            "module": 22,
            "status": 1,
            "path": "/login",
            "desc": "登录接口",
            "env": 3,
        },
        "request": {
            "method": "post",
            "headers": {
                "token": "${token}",
                "Content-Type": "application/json"
            },
            "query": {

            },
            "body": {
                "account": {
                    "value": "*phone*",
                    "type": "int"
                },
                "password":{
                    "value": "123456",
                    "type": "int"
                }
            },
            "file": {
                "file_id": 123,
                "param": {
                    "use_type": "SalaryImg"
                    }
            }
        }
    }
}
```
4. 编辑接口模板详情
- 说明: 编辑接口模板详情
- api: `/edit_details`
- method: post
- Requset
    - header: `token: eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9`
```json
{
    "data": {
        "info":{
            "name": "登录",
            "manager": 12,
            "author": 3,
            "module": 22,
            "status": 1,
            "path": "/login",
            "desc": "登录接口",
            "env": 3,
        },
        "request": {
            "method": "post",
            "headers": {
                "token": "${token}",
                "Content-Type": "application/json"
            },
            "query": {

            },
            "body": {
                "account": {
                    "value": "*phone*",
                    "type": "int"
                },
                "password":{
                    "value": "123456",
                    "type": "int"
                }
            },
            "file": {
                "file_id": 123,
                "param": {
                    "use_type": "SalaryImg"
                    }
            }
        }
    },
    "id": 123
}
```
- Response
```json
{
    "success": true
}
```
## 接口用例
### 筛选项
1. 名称搜索
- 说明: 接口用例搜索
- api: `/search_cases`
- method: post
- Requset
    - header: `token: eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9`
```json
{
    "keyword": {
        "name": "冒烟测试"
    },
    "page": 1,
    "page_size": -1
}
```
- Response
```json
{
    "data": {
        "cases": [
            {
                "id": 3,
                "name": "正常登录",
                "level": 1,
                "api": "登录",
                "near_status": true,
                "desc": "这是个登录的正向用例"
            },
                        {
                "id": 4,
                "name": "密码错误登录",
                "level": 2,
                "api": "登录",
                "near_status": true,
                "desc": "这是个登录的反向用例"
            }
        ]
    },
    "success": true,
    "next_page": 2,
    "total_page": 20
}
```
### 接口用例详情
1. 创建接口用例
- 说明: 创建接口用例
- api: `/add_cases`
- method: post
- Requset
    - header: `token: eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9`
```json
{
    "data": {
        "info":{
            "name": "登录成功",
            "author": 3,
            "module": 22,
            "desc": "正向登录接口",
            "env": 3,
            "level": 3
        },
        "request": {
            "method": "post",
            "headers": {
                "token": "${token}",
                "Content-Type": "application/json"
            },
            "query": {

            },
            "body": {
                "account": {
                    "value": "*phone*",
                    "type": "int"
                },
                "password":{
                    "value": "123456",
                    "type": "int"
                }
            },
            "file": {
                "file_id": 123,
                "param": {
                    "use_type": "SalaryImg"
                    }
            }
        },
        "steps": [
            {
                "order": 1,
                "event": "database_extract",
                "name": "提取验证码",
                "key": ["code"],
                "sql": "select code from vcode where phone='${phone}';"
            },
            {
                "order": 2,
                "event": "database_execute",
                "sql": "update vcode set code=200 where phone='${phone}';",
                "expected": true,
                "name": "修改验证码"
            },
            {
                "order": 3,
                "event": "self"
            },
            {
                "order": 4,
                "event": "wait",
                "jsonpath": "$.data.success",
                "expected": true,
                "type": "bool",
                "timeout": "30",
                "name": "等待请求成功"
            }
            {
                "order": 5,
                "event": "api_assert",
                "jsonpath": "$.data.code",
                "expected": "200",
                "type": "int",
                "name": "接口层断言"
            },
            {
                "order": 6,
                "event": "api_status_code",
                "code": 200,
                "name": "状态码断言"
            },
            {
                "order": 7,
                "event": "database_assert",
                "sql": "select * from vcode where phone='${phone}';",
                "expected": ["a", "b", 123],
                "name": "数据层断言"
            },
            {
                "order": 8,
                "event": "api_extract",
                "key": "username",
                "jsonpath": "$.data.username",
                "name": "接口层提取参数"
            }
        ]
    },
    "parent": 3
}
```
- Response
```json
{
    "success": true
}
```
2. 查看用例详情
- 说明: 查看用例详情
- api: `/cases_details`
- method: post
- Requset
    - header: `token: eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9`
```json
{
    "id": 30
}
```
- Response
```json
{
    "data": {
        "info":{
            "name": "登录成功",
            "author": 3,
            "module": 22,
            "desc": "正向登录接口",
            "env": 3,
            "level": 3,
            "parent": 3,
            "parent_name": "登录",
            "path": "/login"
        },
        "request": {
            "method": "post",
            "headers": {
                "token": "${token}",
                "Content-Type": "application/json"
            },
            "query": {

            },
            "body": {
                "account": {
                    "value": "*phone*",
                    "type": "int"
                },
                "password":{
                    "value": "123456",
                    "type": "int"
                }
            },
            "file": {
                "file_id": 123,
                "param": {
                    "use_type": "SalaryImg"
                    }
            }
        },
        "order": [
            {
                "order": 1,
                "event": "database_extract",
                "name": "提取验证码",
                "key": ["code"],
                "sql": "select code from vcode where phone='${phone}';",
                "id": 1
            },
            {
                "order": 2,
                "event": "database_execute",
                "sql": "update vcode set code=200 where phone='${phone}';",
                "expected": true,
                "name": "修改验证码",
                "id": 2
            },
            {
                "order": 3,
                "event": "self",
                "id": 3
            },
            {
                "order": 4,
                "event": "wait",
                "jsonpath": "$.data.success",
                "value": "ture",
                "type": "bool",
                "timeout": "30",
                "name": "等待请求成功",
                "id": 4
            }
            {
                "order": 5,
                "event": "api_assert",
                "jsonpath": "$.data.code",
                "expected": "200",
                "type": "int",
                "name": "接口层断言",
                "id": 5
            },
            {
                "order": 6,
                "event": "api_status_code",
                "code": 200,
                "name": "状态码断言",
                "id": 6
            },
            {
                "order": 7,
                "event": "database_assert",
                "sql": "select * from vcode where phone='${phone}';",
                "expected": ["a", "b", 123],
                "name": "数据层断言",
                "id": 7
            },
            {
                "order": 8,
                "event": "api_extract",
                "name": "username",
                "jsonpath": "$.data.username",
                "name": "接口层提取参数",
                "id": 8
            }
        ]
    },
    "success": true
}
```
3. 编辑用例详情
- 说明: 编辑用例详情
- api: `/edit_cases`
- method: post
- Requset
    - header: `token: eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9`
```json
{
    "data": {
        "info":{
            "name": "登录成功",
            "author": 3,
            "module": 22,
            "desc": "正向登录接口",
            "env": 3,
            "level": 3
        },
        "request": {
            "method": "post",
            "headers": {
                "token": "${token}",
                "Content-Type": "application/json"
            },
            "query": {

            },
            "body": {
                "account": {
                    "value": "*phone*",
                    "type": "int"
                },
                "password":{
                    "value": "123456",
                    "type": "int"
                }
            },
            "file": {
                "file_id": 123,
                "param": {
                    "use_type": "SalaryImg"
                    }
            }
        },
        "order": [
            {
                "order": 1,
                "event": "database_extract",
                "name": "提取验证码",
                "key": ["code"],
                "sql": "select code from vcode where phone='${phone}';",
                "id": 1
            },
            {
                "order": 2,
                "event": "database_execute",
                "sql": "update vcode set code=200 where phone='${phone}';",
                "expected": true,
                "name": "修改验证码",
                "id": 2
            },
            {
                "order": 3,
                "event": "self",
                "id": 3
            },
            {
                "order": 4,
                "event": "wait",
                "jsonpath": "$.data.success",
                "value": "ture",
                "type": "bool",
                "timeout": "30",
                "name": "等待请求成功",
                "id": 4
            }
            {
                "order": 5,
                "event": "api_assert",
                "jsonpath": "$.data.code",
                "expected": "200",
                "type": "int",
                "name": "接口层断言",
                "id": 5
            },
            {
                "order": 6,
                "event": "api_status_code",
                "code": 200,
                "name": "状态码断言"
            },
            {
                "order": 7,
                "event": "database_assert",
                "sql": "select * from vcode where phone='${phone}';",
                "expected": ["a", "b", 123],
                "name": "数据层断言"
            },
            {
                "order": 8,
                "event": "api_extract",
                "name": "username",
                "jsonpath": "$.data.username",
                "name": "接口层提取参数"
            }
        ]
    },
    "id": 30
}
```
- Response
```json
{
    "success": true
}
```
4. 运行用例详情
- 说明: 运行用例详情
- api: `/execute_case`
- method: post
- Requset
    - header: `token: eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9`
```json
{
    "id": 1234,
    "env": 3 
}
```
- Response
```json
{
    "success": true,
    "data": {
        "headers": {
            "Content-Type": "application/json"
        },
        "body": {
            "success": true
        },
        "status_code": 200
    }
}
```
### 接口用例列表
1. 删除用例
- 说明: 删除接口用例, 支持批量删除
- api: `/delete_cases`
- method: delete
- Requset
    - header: `token: eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9`
```json
{
    "id": [2, 3, 4, 5]
}
```
- Response
```json
{
    "success": true
}
```
2. 获取接口用例列表
- 说明: 查看接口关联用例列表
- api: `/cases`
- method: post
- Requset
    - header: `token: eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9`
```json
{
    "module_id": 2,
    "page": 1
}
```
- Response
```json
{
    "data": {
        "cases": [
            {
                "id": 3,
                "name": "正常登录",
                "level": 1,
                "api": "登录",
                "near_status": true,
                "desc": "这是个登录的正向用例"
            },
                        {
                "id": 4,
                "name": "密码错误登录",
                "level": 2,
                "api": "登录",
                "near_status": true,
                "desc": "这是个登录的反向用例"
            }
        ]
    },
    "success": true,
    "next_page": 2,
    "total_page": 20
}
```
3. 获取接口信息
- 说明: 查看接口关联用例列表
- api: `/cases_info`
- method: post
- Requset
    - header: `token: eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9`
```json
{
    "module_id": 2
}
```
- Response
```json
{
    "data": {
        "info": {
            "count": 30,
            "success_rate": 0.5
        }
    },
    "success": true
}
```

## 场景组合
### 筛选项
1. 名称搜索
- 说明: 场景组合搜索
- api: `/search_suite`
- method: post
- Requset
    - header: `token: eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9`
```json
{
    "keyword": {
        "name": "冒烟测试"
    },
    "page": 1,
    "page_size": -1
}
```
- Response
```json
{
    "data": {
        "suite": [
            {
                "id": 312,
                "name": "冒烟测试A",
                "status": 1,
                "author": "xiaoming",
                "create_date": "2020-05-04 15:12:21",
                "update_date": "2020-05-04 15:12:21",
                "steps": 30,
                "success_rate": 0.3,
                "level": 3
            },
                        {
                "id": 123,
                "name": "冒烟测试B",
                "status": 3,
                "author": "xiaoming",
                "create_date": "2020-05-04 15:12:21",
                "update_date": "2020-05-04 15:12:21",
                "steps": 30,
                "success_rate": 0.3,
                "level": 3
            }
        ]
    },
    "success": true,
    "next_page": 2,
    "total_page": 20
}
```
### 场景列表
1. 获取场景列表
- 说明: 获取场景列表
    - status: 1为未开始 2为进行中 3为已完成
- api: `/suite`
- method: post
- Requset
    - header: `token: eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9`
```json
{
    "page": 1
}
```
- Response
```json
{
    "data": {
        "suite": [
            {
                "id": 312,
                "name": "冒烟测试A",
                "status": 1,
                "author": "xiaoming",
                "create_date": "2020-05-04 15:12:21",
                "update_date": "2020-05-04 15:12:21",
                "steps": 30,
                "success_rate": 0.3,
                "level": 3
            },
                        {
                "id": 123,
                "name": "冒烟测试B",
                "status": 3,
                "author": "xiaoming",
                "create_date": "2020-05-04 15:12:21",
                "update_date": "2020-05-04 15:12:21",
                "steps": 30,
                "success_rate": 0.3,
                "level": 3
            }
        ]
    },
    "success": true,
    "next_page": 2,
    "total_page": 20
}
```
2. 删除场景
- 说明: 删除场景
- api: `/delete_suite`
- method: delete
- Requset
    - header: `token: eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9`
```json
{
    "id": 3
}
```
- Response
```json
{
    "success": true
}
```
3. 查看场景引用
- 说明: 删除场景
- api: `/relation_suite`
- method: delete
- Requset
    - header: `token: eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9`
```json
{
    "id": 3
}
```
- Response
```json
{
    "data": {
        "relation": [
            {
                "id": 312,
                "name": "冒烟测试A",
                "status": 1,
                "author": "xiaoming",
                "create_date": "2020-05-04 15:12:21",
                "update_date": "2020-05-04 15:12:21",
                "steps": 30,
                "success_rate": 0.3,
                "level": 3
            },
                        {
                "id": 123,
                "name": "冒烟测试B",
                "status": 3,
                "author": "xiaoming",
                "create_date": "2020-05-04 15:12:21",
                "update_date": "2020-05-04 15:12:21",
                "steps": 30,
                "success_rate": 0.3,
                "level": 3
            }
        ]
    },
    "success": true
}
```
4. 场景运行接口
- 说明: 运行场景
- api: `/execute_suite`
- method: post
- Response
    - header: `token: eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9`
```json
{
    "suite_id": 12454,
    "env": 3
}
```
- Response
```json
{
    "success": true
}
```
### 场景详情
1. 场景创建接口
- 说明: 创建场景
    - status: 1为未开始 2为进行中 3为已完成
- api: `/create_suite`
- method: post
- Requset
    - header: `token: eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9`
```json
{
    "cases": [
        {
            "type": "case", "id": 12355, "switch": true
            }, 
        {
            "type": "suite", "id": 12345, "copy": true, "steps": [
            {"id": 5742, "switch": true}, 
            {"id": 5741, "switch": false},
            {"id": 23, "switch": false}
            ]
        }, 
        {
            "type": "suite", "id": 12345, "copy": false
        }, 
        {
            "type": "case", "id": 6666, "switch": true
        }
        ],
    "info": {
        "name": "smoke",
        "status": 3,
        "manager": 123,
        "author": 11,
        "level": 2,
        "desc": "这是个冒烟测试用例集",
    },
    "local_variable":{
        "account": "hello",
        "password": "world"
    },
    "skip": true
}
```
- Response
```json
{
    "success": true,
    "suite_id": 12454
}
```
2. 获取场景详情
- 说明: 获取场景详情
- api: `/suite_details`
- method: post
- Requset
    - header: `token: eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9`
```json
{
    "id": 30
}
```
- Response
```json
{
    "success": true,
    "data": {
        "cases": [
            {"type": "case", "id": 12355, "switch": true}, 
            {"type": "suite", "id": 12345, "copy": true, "cases": [
                {"id": 5742, "switch": true}, 
                {"id": 5742, "switch": false}
                ]
            }, 
            {"type": "case", "id": 6666, "switch": true}
            ],
        "info": {
            "name": "smoke",
            "status": 3,
            "manager": 123,
            "author": 11,
            "level": 2,
            "desc": "这是个冒烟测试用例集",
        },
        "local_variable":{
            "account": "hello",
            "password": "world"
        },
        "skip": true
    }
}
```
3. 编辑场景详情
- 说明: 编辑场景详情
- api: `/edit_details`
- method: post
- Requset
    - header: `token: eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9`
```json
{
    "id": 30,
    "cases": [
            {"type": "case", "id": 12355, "switch": true}, 
            {"type": "suite", "id": 12345, "copy": true, "cases": [
                {"id": 5742, "switch": true}, 
                {"id": 5742, "switch": false}
                ]
            }, 
            {"type": "case", "id": 6666, "switch": true}
            ],
        "info": {
            "name": "smoke",
            "status": 3,
            "manager": 123,
            "author": 11,
            "level": 2,
            "desc": "这是个冒烟测试用例集",
        },
        "local_variable":{
            "account": "hello",
            "password": "world"
        },
        "skip": true
    }
}
```
- Response
```json
{
    "success": true
}
```
## 环境
### 系统环境
#### 系统环境列表
1. 获取系统环境列表
- 说明: 获取系统环境列表
    - page_size如果为-1则是无限
- api: `/sys_env`
- method: post
- Requset
    - header: `token: eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9`
```json
{
    "project": 2,
    "page": 1,
    "page_size": -1
}
```
- Response
```json
{
    "data": {
        "env": [
            {
                "name": "测试环境",
                "desc": "这是个测试环境",
                "host": "172.16.16.50",
                "id": 2
            },
            {
                "name": "开发环境",
                "desc": "这是个开发环境",
                "host": "172.16.16.30",
                "id": 1
            }
        ]
    },
    "success": true,
    "next_page": null,
    "total_page": 1
}
```
2. 删除系统环境
- 说明: 删除系统环境
- api: `/delete_sys_env`
- method: delete
- Requset
    - header: `token: eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9`
```json
{
    "id": 3
}
```
- Response
```json
{
    "success": true
}
```
#### 系统环境详情
1. 添加系统环境
- 说明: 获取系统环境列表
- api: `/add_sys_env`
- method: post
- Requset
    - header: `token: eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9`
```json
{
    "data": {
        "name": "开发环境",
        "variable": {
            "region": "beijing"
        },
        "host": "www.baidu.com",
        "database": {
            "name": "开发数据库",
            "url": "172.16.0.90:3306",
            "username": "hello",
            "password": "world"
        }
    },
    "module": 3
}
```
- Response
```json
{
    "success": true
}
```
2. 编辑系统环境
- 说明: 编辑系统环境
- api: `/edit_sys_env`
- method: post
- Requset
    - header: `token: eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9`
```json
{
    "data": {
        "name": "开发环境",
        "variable": {
            "region": "beijing"
        },
        "host": "www.baidu.com",
        "database": {
            "name": "开发数据库",
            "url": "172.16.0.90:3306",
            "username": "hello",
            "password": "world"
        }
    },
    "id": 30
    
}
```
- Response
```json
{
    "success": true
}
```
3. 查看系统环境
- 说明: 查看系统环境
- api: `/sys_env_details`
- method: post
- Requset
    - header: `token: eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9`
```json
{
    "id": 30
}
```
- Response
```json
{
    "data": {
        "name": "开发环境",
        "variable": {
            "region": "beijing"
        },
        "host": "www.baidu.com",
        "database": {
            "name": "开发数据库",
            "url": "172.16.0.90:3306",
            "username": "hello",
            "password": "world"
        }
    },
    "module": 3,
    "success": true
}
```
### 用户变量
1. 获取用户变量列表
- 说明: 获取用户变量列表
    - page_size如果为-1则是无限
- api: `/user_environment`
- method: post
- Requset
    - header: `token: eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9`
```json
{
    "project": 2,
    "page": 1,
    "page_size": -1
}
```
- Response
```json
{
    "data": {
        "variable": [
            {
                "name": "域名",
                "key": "host",
                "value": "127.0.0.1",
                "desc": "域名",
                "id": 1
            },
            {
                "name": "姓名",
                "key": "username",
                "value": "xiaoming",
                "desc": "姓名",
                "id": 2
            },
        ]
    },
    "success": true,
    "next_page": null,
    "total_page": 1
}
```
2. 添加用户变量
- 说明: 添加用户变量
- api: `/add_user_env`
- method: post
- Requset
    - header: `token: eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9`
```json
{
    "variable": {
        "name": "域名",
        "key": "host",
        "value": "127.0.0.1",
        "desc": "域名",
        "id": 1
    }
}
```
- Response
```json
{
    "success": true
}
```
3. 删除用户变量
- 说明: 删除用户变量
- api: `/delete_user_env`
- method: post
- Requset
    - header: `token: eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9`
```json
{
    "id": 3
}
```
- Response
```json
{
    "success": true
}
```
4. 编辑用户变量
- 说明: 添加用户变量
- api: `/edit_user_env`
- method: post
- Requset
    - header: `token: eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9`
```json
{
    "variable": {
        "name": "域名",
        "key": "host",
        "value": "127.0.0.1",
        "desc": "域名",
        "id": 1
    },
    "id":3
}
```
- Response
```json
{
    "success": true
}
```
## 定时任务
1. 获取定时任务信息
- 说明: 获取信息
- api: `/timer_info`
- method: post
- Requset
    - header: `token: eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9`
```json
{
    "module_id": 2
}
```
- Response
```json
{
    "data": {
        "info": {
            "count": 30,
            "success_rate": 0.5
        }
    },
    "success": true
}
```
2. 获取定时任务列表
- 说明: 获取定时任务列表
- api: `/timer`
- method: post
- Requset
    - header: `token: eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9`
```json
{
    "module_id": 2,
    "page": 1
}
```
- Response
```json
{
    "data": {
        "cases": [
            {
                "id": 3,
                "name": "正常登录",
                "cron": "* * * * 1 ?",
                "env": 3,
                "env_name": "测试环境",
                "runs": 30,
                "next_run": "2021-05-01 23:26:00",
                "switch": true,
                "near_status": true,
                "desc": "这是个登录的正向用例"
            },
            {
                "id": 4,
                "name": "密码错误登录",
                "cron": "* * * * 1 ?",
                "env": 3,
                "env_name": "测试环境",
                "runs": 20,
                "next_run": "2021-05-01 23:26:00",
                "switch": true,
                "near_status": true,
                "desc": "这是个登录的反向用例"
            }
        ]
    },
    "success": true,
    "next_page": 2,
    "total_page": 20
}
```
3. 删除定时任务
- 说明: 删除接口用例, 支持批量删除
- api: `/delete_timer`
- method: delete
- Requset
    - header: `token: eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9`
```json
{
    "id": [2, 3, 4, 5]
}
```
- Response
```json
{
    "success": true
}
```
4. 创建定时任务
- 说明: 创建定时任务
- api: `/add_timer`
- method: delete
- Requset
    - header: `token: eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9`
```json
{
    "data": {
        "cron": "* * * * 1 ?",
        "env": 3,
        "desc": "这是个登录的反向用例"
    },
    "parent": 5,
    "project": 3
}
```
- Response
```json
{
    "success": true
}
```
## 测试报告
### 筛选项
1. 测试报告搜索
- 说明: 测试报告搜索
    - status: ERROR TRUE FALSE
- api: `/search_report`
- method: post
- Requset
    - header: `token: eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9`
```json
{
    "keyword": {
        "name": "冒烟测试",
        "status": "ERROR",
        "mode": "system",
        "caller_name": "xaioming",
    },
    "page": 1,
    "page_size": -1
}
```
- Response
```json
{
    "data": {
        "report": [
            {
                "suite": "冒烟测试A",
                "caller_id": 3,
                "caller_name": "xiaoming",
                "call_time": "2021-05-01 23:26:00",
                "mode": "system",
                "status": "ERROR"
            },
            {
                "suite": "冒烟测试B",
                "caller_id": 3,
                "caller_name": "xiaoming",
                "call_time": "2021-05-01 23:26:00",
                "mode": "system",
                "status": "ERROR"
            }
        ]
    },
    "success": true,
    "next_page": 2,
    "total_page": 20
}
```
### 报告列表
1. 测试报告列表
- 说明: 测试报告列表
    - status: ERROR TRUE FALSE
- api: `/reports`
- method: post
- Requset
    - header: `token: eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9`
```json
{
    "project": 2,
    "page": 1,
    "page_size": -1
}
```
- Response
```json
{
    "data": {
        "report": [
            {
                "suite": "冒烟测试A",
                "caller_id": 3,
                "caller_name": "xiaoming",
                "call_time": "2021-05-01 23:26:00",
                "mode": "system",
                "status": "ERROR"
            },
            {
                "suite": "冒烟测试A",
                "caller_id": 3,
                "caller_name": "xiaoming",
                "call_time": "2021-05-01 23:26:00",
                "mode": "system",
                "status": "ERROR"
            }
        ]
    },
    "success": true,
    "next_page": 2,
    "total_page": 20
}
```
2. 删除测试报告
- 说明: 删除测试报告
- api: `/delete_report`
- method: delete
- Requset
    - header: `token: eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9`
```json
{
    "id": 3
}
```
- Response
```json
{
    "success": true
}
```
### 报告详情
1. 查看测试报告详情
- 说明: 查看测试报告详情
- api: `/report_details`
- method: delete
- Requset
    - header: `token: eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9`
```json
{
    "id": 3
}
```
- Response
```json
{
    "data": {
        "info":{
            "running_time": "2021-05-01 23:26:00",
            "steps": 30,
            "success_count": 20,
            "failure_count": 10,
            "failure_rate": 0.33,
            "success_rate": 0.67,
            "error_count": 0,
            "error_rate": 0
        },
        "steps": [
            {
                "name": "注册",
                "status": "true",
                "duration": 30,
                "log": "",
                "request": {
                    "method": "post",
                    "headers": {
                        "token": "eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9",
                        "Content-Type": "application/json"
                    },
                    "query": {

                    },
                    "body": {
                        "account": {
                            "value": "*phone*",
                            "type": "int"
                        },
                        "password":{
                            "value": "123456",
                            "type": "int"
                        }
                    },
                    "file": {
                        "file_id": 123,
                        "param": {
                            "use_type": "SalaryImg"
                            }
                    }

                },
                "response": {
                    "header": {
                        "Content-Type": "application/json"
                    },
                    "body": {
                        "success": true
                    }

                }
            },
            {
                "name": "登录",
                "status": "true",
                "duration": 30,
                "log": "",
                "request": {
                    "method": "post",
                    "headers": {
                        "token": "eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9",
                        "Content-Type": "application/json"
                    },
                    "query": {

                    },
                    "body": {
                        "account": {
                            "value": "*phone*",
                            "type": "int"
                        },
                        "password":{
                            "value": "123456",
                            "type": "int"
                        }
                    },
                    "file": {
                        "file_id": 123,
                        "param": {
                            "use_type": "SalaryImg"
                            }
                    }

                },
                "response": {
                    "header": {
                        "Content-Type": "application/json"
                    },
                    "body": {
                        "success": true
                    }

                }
            }
        ]

    },
    "success": true
}

```
## 方法实现
1. 获取方法实现
- 说明: 获取方法实现
- api: `/function`
- method: post
- Requset
    - header: `token: eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9`
```json
{
    "project": 3
}
```
- Response
```json
{
    "data": {
        "text": ""
    },
    "success": true
}
```
2. 创建方法实现
- 说明: 创建方法实现
- api: `/create_function`
- method: post
- Requset
    - header: `token: eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9`
```json
{
    "project": 3,
    "text": ""
}
```
- Response
```json
{
    "success": true,
    "id": 3
}
```
3. 编辑方法实现
- 说明: 编辑方法实现
- api: `/edit_function`
- method: post
- Requset
    - header: `token: eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9`
```json
{
    "id": 3,
    "text": ""
}
```
- Response
```json
{
    "success": true
}
```
# 系统设置

## 角色管理
1. 获取角色列表
- 说明: 获取角色列表
- api: `/role`
- method: get
- Requset
    - header: `token: eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9`
- Response
```json
{
    "data": {
        "role": [
            {   
                "id": 1,
                "name": "admin",
                "author": 123,
                "author_name": "xiaohong",
                "create_data": "2021-04-22 23:11:00",
                "update_date": "2021-04-23 15:22:13",
                "status": true
            },{
                "id": 2,
                "name": "tester",
                "author": 123,
                "author_name": "xiaohong",
                "create_data": "2021-04-22 23:11:00",
                "update_date": "2021-04-23 15:22:13".
                "status": false
            },
        ]
    },
    "success": true
}
```
2. 增加角色
- 说明: 获取角色列表
- api: `/add_role`
- method: post
- Requset
    - header: `token: eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9`
```json
{
    "permission": {
        "project": [1, 2, 5],
        "access_no": [1, 11, 12, 15, 19, 2, 22, 25, 27, 3]
    },
    "name": "角色1",
    "description": "这是角色1"
}
```
- Response
```json
{
    "success": true
}
```
3. 冻结角色
- 说明: 冻结某个角色,关联用户全部冻结
- api: `/freeze_role`
- method: post
- Requset
    - header: `token: eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9`
```json
{
    "role_id":　30
}
```
- Response
```json
{
    "success": true
}
```
4. 获取角色权限
- 说明: 获取角色权限
- api: `/role_permission`
- method: post
- Requset
    - header: `token: eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9`
```json
{
    "role_id":　22
}
```
- Response
```json
{
    "data": {
        "permission": {
            "project": [1, 2, 5],
            "access_no": [1, 11, 12, 15, 19, 2, 22, 25, 27, 3]
        },
        "name": "角色1",
        "description": "这是角色1",
    },
    "success": true
}
```
5. 编辑角色
- 说明: 获取角色权限
- api: `/edit_role`
- method: update
- Requset
    - header: `token: eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9`
```json
{
    "role_id": 22,
    "permission": {
        "project": [1, 2, 5],
        "permission_no": {
            "1": [11, 24, 26, 29],
            "2": [22, 24, 26],
            "3": []
        }
    },
    "name": "角色1",
    "description": "这是角色1",
}
```
- Response
```json
{
    "success": true
}
```
## 用户管理
1. 获取用户列表
- 说明: 获取用户列表
- api: `/user_list`
- method: get
- Requset
    - header: `token: eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9`
- Response
```json
{
    "data": [
        {
            "id": 1,
            "name": "小黄",
            "account": "xiaohuang",
            "phone": "13013018883",
            "email": "hello@gmail.com",
            "create_date": "2020-05-04 15:12:21",
            "role": 1,
            "status": true
        },
        {
            "id": 2,
            "name": "小红",
            "account": "xiaohong",
            "phone": "13013018884",
            "email": "world@gmail.com",
            "create_date": "2020-05-04 15:12:21",
            "role": 3,
            "status": true
        }
    ],
    "success": true
}
```
2. 增加用户
- 说明: 增加用户
- api: `/add_user`
- method: post
- Requset
    - header: `token: eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9`
```json
{
    "name": "小红",
    "account": "xiaohong",
    "phone": "13013018884",
    "email": "world@gmail.com",
    "role": 1,
}
```
- Response
```json
{
    "success": true
}
```
3. 冻结用户
- 说明: 增加用户
- api: `/freeze_user`
- method: post
- Requset
    - header: `token: eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9`
```json
{
    "id": 1
}
```
- Response
```json
{
    "success": true
}
```
4. 编辑用户
- 说明: 增加用户
- api: `/edit_user`
- method: update
- Requset
    - header: `token: eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9`
```json
{
    "id": 3,
    "name": "小红",
    "phone": "13013018884",
    "email": "world@gmail.com",
    "role": 1,
}
```
- Response
```json
{
    "success": true
}
```
5. 重置用户密码
- 说明: 恢复初始化密码
- api: `/reset_pwd`
- method: update
- Requset
    - header: `token: eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9`
```json
{
    "id": 3
}
```
- Response
```json
{
    "success": true
}
```